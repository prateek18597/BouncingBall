<!DOCTYPE html>
<html>
<head>
  <style type="text/css">
    canvas{
      background-color: blue;
    }
    body{
      background-color: blue;
    }
  </style>
  <title></title>
</head>
<body>
  <!-- <div width=100% height=100%> -->
<canvas id="canvas" style="border:1px solid red">
  This is a canvas
</canvas>
<!-- <div> -->
<script type="text/javascript">
function init() {
  window.requestAnimationFrame(draw);
}



var x=500;
var y=300;
var x1=150;
var y1=100;
var vx1=6;
var vy1=4;
var x2=750;
var y2=500;
var vx2=-2;
var vy2=3;
var x3=350;
var y3=200;
var vx3=3;
var vy3=2;


var vx=8;
var vy=-4;

var lx=1;
var ly=-1;
var lx1=1;
var ly1=1;
var lx2=1;
var ly2=1;
var lx3=1;
var ly3=1;

var canvas=document.getElementById('canvas');
canvas.width=screen.width-70;
canvas.height=screen.height-145;
var ctx = document.getElementById('canvas').getContext('2d');

function collision()
{
  
  if(Math.sqrt((x+vx*lx-(x1+vx1*lx1))*(x+vx*lx-(x1+vx1*lx1))+(y+vy*ly-y1-vy1*ly1)*(y+vy*ly-y1-vy1*ly1))<=100)
  {
    var temp=vx1;
    vx1=vx;
    vx=temp;
    temp=vy1;
    vy1=vy;
    vy=temp;
    temp=lx;
    lx=lx1;
    lx1=temp;
    temp=ly1;
    ly1=ly;
    ly=temp;
  }
  if(Math.sqrt((x+vx*lx-(x2+vx2*lx2))*(x+vx*lx-(x2+vx2*lx2))+(y+vy*ly-y2-vy2*ly2)*(y+vy*ly-y2-vy2*ly2))<=100)
  {
    var temp=vx2;
    vx2=vx;
    vx=temp;
    temp=vy2;
    vy2=vy;
    vy=temp;
    temp=lx;
    lx=lx2;
    lx2=temp;
    temp=ly2;
    ly2=ly;
    ly=temp;
  }
  if(Math.sqrt((x2+vx2*lx2-(x1+vx1*lx1))*(x2+vx2*lx2-(x1+vx1*lx1))+(y2+vy2*ly2-y1-vy1*ly1)*(y2+vy2*ly2-y1-vy1*ly1))<=100)
  {
    var temp=vx1;
    vx1=vx2;
    vx2=temp;
    temp=vy1;
    vy1=vy2;
    vy2=temp;
    temp=lx2;
    lx2=lx1;
    lx1=temp;
    temp=ly1;
    ly1=ly2;
    ly2=temp;
  }


  if(Math.sqrt((x+vx*lx-(x3+vx3*lx3))*(x+vx*lx-(x3+vx3*lx3))+(y+vy*ly-y3-vy3*ly3)*(y+vy*ly-y3-vy3*ly3))<=100)
  {
    var temp=vx3;
    vx3=vx;
    vx=temp;
    temp=vy3;
    vy3=vy;
    vy=temp;
    temp=lx;
    lx=lx3;
    lx3=temp;
    temp=ly3;
    ly3=ly;
    ly=temp;
  }
  if(Math.sqrt((x3+vx3*lx3-(x2+vx2*lx2))*(x3+vx3*lx3-(x2+vx2*lx2))+(y3+vy3*ly3-y2-vy2*ly2)*(y3+vy3*ly3-y2-vy2*ly2))<=100)
  {
    var temp=vx2;
    vx2=vx3;
    vx3=temp;
    temp=vy2;
    vy2=vy3;
    vy3=temp;
    temp=lx3;
    lx3=lx2;
    lx2=temp;
    temp=ly2;
    ly2=ly3;
    ly3=temp;
  }
  if(Math.sqrt((x3+vx3*lx3-(x1+vx1*lx1))*(x3+vx3*lx3-(x1+vx1*lx1))+(y3+vy3*ly3-y1-vy1*ly1)*(y3+vy3*ly3-y1-vy1*ly1))<=100)
  {
    var temp=vx1;
    vx1=vx3;
    vx3=temp;
    temp=vy1;
    vy1=vy3;
    vy3=temp;
    temp=lx3;
    lx3=lx1;
    // lx1=temp;
    temp=ly1;
    ly1=ly3;
    ly3=temp;
  }
  x=x+vx*lx;
    y=y+vy*ly;
    x1=x1+vx1*lx1;
    y1=y1+vy1*ly1;  
    x2=x2+vx2*lx2;
    y2=y2+vy2*ly2;
    x3=x3+vx3*lx3;
    y3=y3+vy3*ly3;
  //
  //   if(x1>=1250 || x1<=50)
  //   {lx1*=-1;}
  // if(y1>=550 || y1<=50){ly1*=-1;}
  // if(x2>=1250 || x2<=50){lx2*=-1;}
  // if(y2>=550 || y2<=50){ly2*=-1;}
  // if(x>=1250 || x<=50){lx*=-1;}
  // if(y>=550 || y<=50){ly*=-1;}
  // // collision();
  window.requestAnimationFrame(draw);
  
  
}

function draw() {
  // var ctx = document.getElementById('canvas').getContext('2d');

  ctx.globalCompositeOperation = 'destination-over';

  ctx.clearRect(0, 0, screen.width, screen.height);
  ctx.beginPath();
  
  ctx.arc(x,y, 50, 0, Math.PI * 2);
  ctx.stroke();
  ctx.fillStyle = "#000000";
    ctx.fill();
  if(x>=canvas.width-50 || x<=50)
    {
      lx*=-1;
    if(x>canvas.width-50)
    {
      x=canvas.width-50;
    }
    if(x<50)
    {
      x=50;
    }
  }
  if(y>=canvas.height-50 || y<=50)
    {
      ly*=-1;
      if(y>canvas.height-50)
    {
      y=canvas.height-50;
    }
    if(y<50)
    {
      y=50;
    }
    }
  
  ctx.beginPath();
  // ctx.clearRect(x1-50, y1-50, 50, 50);
  ctx.arc(x1,y1, 50, 0, Math.PI * 2);
  ctx.stroke();
  ctx.fillStyle = "red";
    ctx.fill();

    ctx.beginPath();
  // ctx.clearRect(x1-50, y1-50, 50, 50);
  ctx.arc(x2,y2, 50, 0, Math.PI * 2);
  ctx.stroke();
  ctx.fillStyle = "green";
    ctx.fill();

    ctx.beginPath();
  // ctx.clearRect(x1-50, y1-50, 50, 50);
  ctx.arc(x3,y3, 50, 0, Math.PI * 2);
  ctx.stroke();
  ctx.fillStyle = "yellow";
    ctx.fill();

  if(x1>=canvas.width-50 || x1<=50)
    {
      lx1*=-1;
    if(x1>canvas.width-50)
    {
      x1=canvas.width-50;
    }
    if(x1<50)
    {
      x1=50;
    }
  }
  if(y1>=canvas.height-50 || y1<=50)
    {
      ly1*=-1;
      if(y1>canvas.height-50)
    {
      y1=canvas.height-50;
    }
    if(y1<50)
    {
      y1=50;
    }
    }

  if(x2>=canvas.width-50 || x2<=50)
    {
      lx2*=-1;
    if(x2>canvas.width-50)
    {
      x2=canvas.width-50;
    }
    if(x2<50)
    {
      x2=50;
    }
  }
  if(y2>=canvas.height-50 || y2<=50)
    {
      ly2*=-1;
      if(y2>canvas.height-50)
    {
      y2=canvas.height-50;
    }
    if(y2<50)
    {
      y2=50;
    }
    } if(x3>=canvas.width-50 || x3<=50)
    {
      lx3*=-1;
    if(x3>canvas.width-50)
    {
      x3=canvas.width-50;
    }
    if(x3<50)
    {
      x3=50;
    }
  }
  if(y3>=canvas.height-50 || y3<=50)
    {
      ly3*=-1;
      if(y3>canvas.height-50)
    {
      y3=canvas.height-50;
    }
    if(y3<50)
    {
      y3=50;
    }
    }
collision();  
}

init(); 
</script>

</body>

</html>
